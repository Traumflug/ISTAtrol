v 20140308 2
T 36500 32700 9 14 1 0 0 1 8
ISTAtrol

A controller for optimisation of heatings
equipped with ISTA counters.

(c) 2016 Traumflug
Creative Commons BY-NC-SA 3.0 Licence

C 45200 35900 1 0 0 gnd-1.sym
N 45300 36400 45300 36200 4
N 48400 43000 48400 40000 4
N 48100 40000 48400 40000 4
T 50400 33300 9 6 1 0 0 0 5
This works similar to the
schematic in AN AVR400,
but constant voltage on AIN1
and variable loading speed of
the capacitor at AIN0.
C 45100 35900 1 0 0 ATtiny2313.sym
{
T 46800 36100 5 10 1 1 0 5 1
device=ATtiny2313
T 46800 40300 5 10 1 1 0 3 1
refdes=U1
T 46826 40700 5 10 0 0 0 3 1
footprint=DIP20_1
}
N 45300 36400 45500 36400 4
C 43300 39500 1 0 0 resistor-1.sym
{
T 43300 39500 5 10 0 0 0 0 1
footprint=ACY300_1
T 43600 39800 5 10 1 1 0 0 1
refdes=R4
T 43500 39300 5 10 1 1 0 0 1
value=68R
}
C 39900 37600 1 0 0 gnd-1.sym
N 39800 38900 40000 38900 4
N 40000 38900 40000 37900 4
N 39800 39500 42000 39500 4
N 42000 39500 42000 40200 4
N 42000 39600 43300 39600 4
N 39800 39200 42400 39200 4
C 42400 39100 1 0 0 resistor-1.sym
{
T 42400 39100 5 10 0 0 0 0 1
footprint=ACY300_1
T 42700 39400 5 10 1 1 0 0 1
refdes=R3
T 42600 38900 5 10 1 1 0 0 1
value=68R
}
C 42100 40200 1 90 0 resistor-1.sym
{
T 42100 40200 5 10 0 0 90 0 1
footprint=ACY300_1
T 41800 40500 5 10 1 1 90 0 1
refdes=R2
T 42300 40400 5 10 1 1 90 0 1
value=2K2
}
N 42000 41100 42000 43000 4
C 37600 38100 1 0 0 USB.sym
{
T 37600 38100 5 10 0 0 0 0 1
footprint=USB_B
T 38800 40100 5 10 1 1 0 0 1
value=USB
T 37700 40100 5 10 1 1 0 0 1
refdes=CONN1
}
C 38400 37600 1 0 0 gnd-1.sym
N 38500 37900 38500 38100 4
C 40900 38100 1 90 0 resistor-1.sym
{
T 40900 38100 5 10 0 0 90 0 1
footprint=ACY300_1
T 40600 38400 5 10 1 1 90 0 1
refdes=R1
T 41100 38300 5 10 1 1 90 0 1
value=1M
}
C 40700 37600 1 0 0 gnd-1.sym
N 40800 39000 40800 39200 4
N 40800 37900 40800 38100 4
N 44200 39600 45500 39600 4
N 43300 39200 45500 39200 4
C 45100 32700 1 90 0 connector2-1.sym
{
T 45100 32600 5 10 1 1 180 0 1
refdes=TEMP_3
T 45100 32700 5 10 0 0 180 0 1
footprint=100-2-1
}
C 44000 32700 1 90 0 connector2-1.sym
{
T 44000 32600 5 10 1 1 180 0 1
refdes=TEMP_2
T 44000 32700 5 10 0 0 180 0 1
footprint=100-2-1
}
C 50000 34500 1 90 0 resistor-1.sym
{
T 50000 34500 5 10 0 0 90 0 1
footprint=ACY300_1
T 49700 34800 5 10 1 1 90 0 1
refdes=R11
T 50200 34700 5 10 1 1 90 0 1
value=10K
}
C 50000 33200 1 90 0 resistor-1.sym
{
T 50000 33200 5 10 0 0 90 0 1
footprint=ACY300_1
T 49700 33500 5 10 1 1 90 0 1
refdes=R10
T 50200 33400 5 10 1 1 90 0 1
value=4K7
}
N 49900 34100 49900 34500 4
C 49800 32700 1 0 0 gnd-1.sym
N 49900 33200 49900 33000 4
N 49900 35400 49900 35600 4
C 40100 42200 1 180 0 jumper3-1.sym
{
T 39800 41200 5 10 1 1 180 0 1
refdes=J1
T 40100 42200 5 10 0 0 0 0 1
footprint=JUMPER3_1
}
C 39800 45600 1 270 0 connector2-1.sym
{
T 39800 45700 5 10 1 1 0 0 1
refdes=EXT_VS
T 39800 45600 5 10 0 0 0 0 1
footprint=100-2-1
}
C 40200 43400 1 0 0 gnd-1.sym
N 40300 43900 40300 43700 4
N 40000 43900 40000 43300 4
N 40000 41000 40000 39800 4
N 39800 39800 40800 39800 4
C 42900 32700 1 90 0 connector2-1.sym
{
T 42900 32600 5 10 1 1 180 0 1
refdes=TEMP_1
T 42900 32700 5 10 0 0 180 0 1
footprint=100-2-1
}
N 45500 36800 44900 36800 4
N 44900 36800 44900 34400 4
N 45500 37200 44700 37200 4
N 43800 35300 43800 34400 4
N 45500 37600 44500 37600 4
N 42700 34400 42700 35500 4
C 48900 33400 1 90 0 capacitor-1.sym
{
T 48200 33600 5 10 0 0 90 0 1
device=CAPACITOR
T 48400 33600 5 10 1 1 90 0 1
refdes=C3
T 48000 33600 5 10 0 0 90 0 1
symversion=0.1
T 49100 33600 5 10 1 1 90 0 1
value=1 uF
T 48900 33400 5 10 0 1 0 0 1
footprint=ACY100_1
}
T 45200 34000 9 6 1 0 0 0 4
Switch one I/O to Output Low, the others
to Input, to drain the capacitor. Then switch
the output to High and measure the time
until the Analog comparator triggers.
N 42400 34400 42400 35100 4
N 42400 35100 46400 35100 4
N 43500 34400 43500 35100 4
N 44600 34400 44600 35100 4
N 48100 36800 48700 36800 4
N 48700 34300 48700 36800 4
N 48700 35100 47300 35100 4
C 48800 40200 1 0 0 capacitor-1.sym
{
T 49000 40900 5 10 0 0 0 0 1
device=CAPACITOR
T 49000 40700 5 10 1 1 0 0 1
refdes=C2
T 49000 41100 5 10 0 0 0 0 1
symversion=0.1
T 49000 40000 5 10 1 1 0 0 1
value=0.1 uF
T 48800 40200 5 10 0 1 270 0 1
footprint=ACY100_1
}
C 49800 39900 1 0 0 gnd-1.sym
N 48800 40400 48400 40400 4
N 49700 40400 49900 40400 4
N 49900 40400 49900 40200 4
C 48600 32700 1 0 0 gnd-1.sym
C 46400 35000 1 0 0 resistor-1.sym
{
T 46400 35000 5 10 0 0 0 0 1
footprint=ACY300_1
T 46700 35300 5 10 1 1 0 0 1
refdes=R5
T 46700 34800 5 10 1 1 0 0 1
value=180
}
T 47100 35300 9 6 1 0 0 0 1
short protection
N 48700 33400 48700 33000 4
C 39100 41800 1 90 0 LP2950.sym
{
T 38200 42900 5 10 0 0 90 0 1
device=LP2950 3.3V
T 38800 42800 5 10 0 0 90 0 1
footprint=TO-92_1
T 38400 42900 5 10 1 1 90 0 1
refdes=Q1
T 38600 42900 5 10 1 1 90 0 1
value=LP2950L-33-T92
}
C 36300 43000 1 0 0 3.3V-plus-1.sym
C 38300 41300 1 0 0 gnd-1.sym
C 36900 41700 1 0 0 capacitor-2.sym
{
T 37100 42400 5 10 0 0 0 0 1
device=POLARIZED_CAPACITOR
T 37100 42600 5 10 0 0 0 0 1
symversion=0.1
T 36900 41700 5 10 0 0 90 0 1
footprint=RCY2mm
T 37700 41800 5 10 1 1 180 0 1
refdes=C1
T 37700 42300 5 10 1 1 180 0 1
value=10 uF
}
N 37800 41900 38400 41900 4
N 38400 41600 38400 42100 4
N 36500 41900 36500 43000 4
N 36500 42600 37900 42600 4
N 36900 41900 36500 41900 4
C 39800 43300 1 270 0 diode-1.sym
{
T 39750 42750 5 10 1 1 90 0 1
refdes=D1
T 40400 42500 5 10 1 1 90 0 1
value=1N4004
T 39800 43300 5 10 0 1 90 0 1
footprint=D400_1
}
N 38900 42600 39300 42600 4
T 41300 38500 9 6 1 0 0 0 2
See http://vusb.wikidot.com/hardware and
Readme.txt in firmware/usbdrv/
N 40000 42200 40000 42400 4
N 39700 41600 39300 41600 4
N 39300 41600 39300 42600 4
C 41800 43000 1 0 0 3.3V-plus-1.sym
C 48200 43000 1 0 0 3.3V-plus-1.sym
C 54400 40400 1 0 0 gnd-1.sym
C 51500 40500 1 0 0 ICSP-1.sym
{
T 53600 42150 5 10 0 0 0 3 1
footprint=ICSP_HEADER
T 53600 41950 5 10 1 1 0 3 1
refdes=CONN2
T 53600 40650 5 10 1 1 0 5 1
device=ICSP
}
N 45500 40000 45300 40000 4
N 45300 40000 45300 40900 4
N 54300 40900 54500 40900 4
N 54500 40900 54500 40700 4
N 45300 40900 52900 40900 4
N 48100 39600 52700 39600 4
N 52700 39000 52700 39800 4
N 48100 39200 51700 39200 4
N 51700 39200 51700 41700 4
N 51700 41700 52900 41700 4
N 48100 38800 52100 38800 4
N 54900 41300 54300 41300 4
C 54300 41900 1 0 0 5V-plus-1.sym
N 54300 41700 54500 41700 4
N 54500 41700 54500 41900 4
C 40600 40600 1 0 0 5V-plus-1.sym
N 40800 39800 40800 40600 4
C 52800 39800 1 90 0 resistor-1.sym
{
T 52800 39800 5 10 0 0 90 0 1
footprint=ACY300_1
T 52500 40100 5 10 1 1 90 0 1
refdes=R7
T 53000 40000 5 10 1 1 90 0 1
value=2K2
}
C 52800 38100 1 90 0 resistor-1.sym
{
T 52800 38100 5 10 0 0 90 0 1
footprint=ACY300_1
T 52500 38400 5 10 1 1 90 0 1
refdes=R6
T 53000 38300 5 10 1 1 90 0 1
value=1K
}
C 55000 39800 1 90 0 resistor-1.sym
{
T 55000 39800 5 10 0 0 90 0 1
footprint=ACY300_1
T 54700 40100 5 10 1 1 90 0 1
refdes=R9
T 55200 40000 5 10 1 1 90 0 1
value=2K2
}
C 55000 38100 1 90 0 resistor-1.sym
{
T 55000 38100 5 10 0 0 90 0 1
footprint=ACY300_1
T 54700 38400 5 10 1 1 90 0 1
refdes=R8
T 55200 38300 5 10 1 1 90 0 1
value=1K
}
N 52900 41300 52700 41300 4
N 52700 41300 52700 40700 4
N 54900 40700 54900 41300 4
C 52600 37600 1 0 0 gnd-1.sym
N 52700 38100 52700 37900 4
N 52100 38800 52100 39200 4
N 52100 39200 54900 39200 4
N 54900 39000 54900 39800 4
C 54800 37600 1 0 0 gnd-1.sym
N 54900 38100 54900 37900 4
N 48100 37200 49100 37200 4
N 49100 34300 49100 37200 4
N 49100 34300 49900 34300 4
C 49700 35600 1 0 0 3.3V-plus-1.sym
C 39000 34700 1 0 0 switch-pushbutton-no-1.sym
{
T 39300 35000 5 10 1 1 0 0 1
refdes=MENU
T 39400 35300 5 10 0 0 0 0 1
device=SWITCH_PUSHBUTTON_NO
T 39000 34700 5 10 0 1 270 0 1
footprint=MJTP1230-1
}
C 39000 35500 1 0 0 switch-pushbutton-no-1.sym
{
T 39300 35900 5 10 1 1 0 0 1
refdes=MINUS
T 39400 36100 5 10 0 0 0 0 1
device=SWITCH_PUSHBUTTON_NO
T 39000 35500 5 10 0 1 270 0 1
footprint=MJTP1230-1
}
C 39000 36300 1 0 0 switch-pushbutton-no-1.sym
{
T 39300 36600 5 10 1 1 0 0 1
refdes=PLUS
T 39400 36900 5 10 0 0 0 0 1
device=SWITCH_PUSHBUTTON_NO
T 39000 36300 5 10 0 1 270 0 1
footprint=MJTP1230-1
}
N 43800 35300 44700 35300 4
N 44700 35300 44700 37200 4
N 42700 35500 44500 35500 4
N 44500 35500 44500 37600 4
N 45500 38000 43900 38000 4
N 43900 35900 43900 38000 4
N 40600 35900 43900 35900 4
N 45500 38400 43700 38400 4
N 43700 36100 43700 38400 4
N 40400 36100 43700 36100 4
N 45500 38800 43500 38800 4
N 43500 36300 43500 38800 4
N 43500 36300 40000 36300 4
N 40000 35500 40400 35500 4
N 40400 35500 40400 36100 4
N 40000 34700 40600 34700 4
N 40600 34700 40600 35900 4
N 38600 36700 38600 34700 4
N 38600 34700 39000 34700 4
N 38600 35500 39000 35500 4
C 38400 36700 1 0 0 3.3V-plus-1.sym
N 38600 36300 39000 36300 4
T 52800 39300 9 6 1 0 0 0 5
The Pololu PRG03A programmer delivers
5 V signals, so we need voltage dividers.
They could go into an adapter cable later,
but this needs Vcc. Unsure wether Vcc
has to be 5V.
T 40200 36500 9 6 1 0 0 0 2
'Menu' can trigger an interrupt, after
which all three keys can be polled for a while
C 55100 37200 1 180 0 connector2-1.sym
{
T 55300 36500 5 10 1 1 90 0 1
refdes=MOTOR
T 55100 37200 5 10 0 0 270 0 1
footprint=100-2-1
}
N 48100 38400 51700 38400 4
N 51700 37000 51700 38400 4
N 51700 37000 53400 37000 4
N 53400 36700 51500 36700 4
N 51500 36700 51500 38000 4
N 51500 38000 48100 38000 4
C 54100 34500 1 0 0 gnd-1.sym
C 52900 35700 1 0 0 led-1.sym
{
T 52900 35700 5 10 0 1 90 0 1
footprint=LED3_1
T 53700 36300 5 10 0 0 0 0 1
value=green
T 53700 36500 5 10 0 0 0 0 1
symversion=0.1
T 53300 35600 5 10 1 1 180 0 1
refdes=LED1
}
C 52500 36000 1 180 0 resistor-1.sym
{
T 52200 35600 5 10 0 0 180 0 1
device=RESISTOR
T 52500 36000 5 10 0 1 270 0 1
footprint=ACY300_1
T 51900 36100 5 10 1 1 0 0 1
refdes=R12
T 51900 35600 5 10 1 1 0 0 1
value=560R
}
C 52900 34800 1 0 0 led-1.sym
{
T 52900 34800 5 10 0 1 90 0 1
footprint=LED3_1
T 53700 35400 5 10 0 0 0 0 1
value=green
T 53700 35600 5 10 0 0 0 0 1
symversion=0.1
T 53300 34700 5 10 1 1 180 0 1
refdes=LED2
}
N 48100 37600 50900 37600 4
N 50900 35900 50900 37600 4
N 50900 35900 51600 35900 4
N 48100 36400 50700 36400 4
N 50700 35000 50700 36400 4
N 50700 35000 51600 35000 4
N 53800 35000 54200 35000 4
N 54200 34800 54200 35900 4
N 53800 35900 54200 35900 4
C 52500 35100 1 180 0 resistor-1.sym
{
T 52200 34700 5 10 0 0 180 0 1
device=RESISTOR
T 52500 35100 5 10 0 1 270 0 1
footprint=ACY300_1
T 51900 35200 5 10 1 1 0 0 1
refdes=R13
T 51900 34700 5 10 1 1 0 0 1
value=560R
}
N 52500 35900 52900 35900 4
N 52500 35000 52900 35000 4
